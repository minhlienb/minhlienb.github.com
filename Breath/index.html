<head>
    <link rel="stylesheet" href="Breathe.css">
    <link rel="stylesheet" href="lib/myLayoutLib.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <meta name="theme-color" content="#f5f5f5" />

    <link rel="icon" type="image/x-icon" href="Breath.ico">
    <!-- Đặt tên ứng dụng khi thêm vào màn hình chính -->
    <meta name="apple-mobile-web-app-title" content="Your App Name">
    <!-- Đặt biểu tượng ứng dụng cho iOS -->
    <link rel="apple-touch-icon" href="Breath.ico">
    <!-- Bật chế độ ứng dụng web toàn màn hình cho iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Đặt màu thanh trạng thái cho iOS -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <title>Breath</title>
</head>

<!-- <script>
    // Function to open the popup
    function openPopup() {
        document.getElementById("popup").style.visibility = "visible";
    }

    // Function to close the popup
    function closePopup() {
        document.getElementById("popup").style.visibility = "hidden";
    }

    // Automatically open the popup when the page loads
    window.onload = function() {
        openPopup();
    }
</script> -->
<!-- <div class="">wizard hướng dẫn sử dụng app (ấn giữ để dừng)</div> -->
<div class="mở nhạc và dùng hỉnh tròn ở trung tâm thay cho spectrum"></div>
<div class="popup" id="popup">
    <div class="popup-content">
        <iframe style="width: 100%; aspect-ratio: 16/9;" src="https://www.youtube.com/embed/j8fDJ04ipOw?t=54"
            title="Chúng ta thở như thế nào?" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        <h1>Breath - Luyện tập Hơi Thở</h1>
        <h2>1. Sức khỏe và cuộc sống</h2>
        <p>Cuộc sống hiện đại khiến ta thường bỏ quên sức khỏe.</p>
        <h2>2. Kỹ thuật thở và lợi ích</h2>
        <p>Các kỹ thuật thở giúp điều chỉnh cảm xúc, thư giãn, dễ ngủ, tập trung và giảm suy nghĩ tiêu cực.</p>
        <h2>3. Hướng dẫn luyện tập</h2>
        <p>Ứng dụng hướng dẫn bạn luyện tập thở, biến thở thành một hoạt động thiền hoặc yoga bổ ích.</p>
        <button class="close-btn" onclick="closePopup()">Đóng</button>
        <button class="close-btn" onclick="closePopup(); /*StopRemind()*/">Đừng nói nữaaaaaaa</button>
    </div>
</div>
<!-- <button class="btnToggleFullscreen" onclick="toggleFullscreen()">Toggle Fullscreen</button> -->

<div class="linear-layout fl-dr-col">
    <div class="beater pos-rl">
        <div class="breath-anim inner-round pos-ab"></div>
        <div class="outer-round pos-ab"></div>
    </div>
    <div id="txtIndicator"
        style="margin: 2%; font-size: large; font-family: Georgia, 'Times New Roman', Times, serif; font-weight: 600; color: #606060;">
        Drink some water and stay focus
    </div>
</div>

<button onclick="ResetState()">Strengh Excercise</button>
<button>Box Breathing</button>

<div class="drawer">
    <div class="back-icon"></div>
    <div id="settings"></div>
    #
</div>


<script src="lib/gsap.min.js"></script>
<!-- <script src="fullscreen.js"></script> -->
<!-- <script src="sw.js"></script> -->
<!-- <script src="installPageAsApp.js"></script> -->
<script>
    let lightColor = '#57d8ff';
    let strenghColor = "#ff8457"
    //let duration = 3.5;
    let txtIndicator = document.getElementById('txtIndicator');
    //let repeat = 15;

    let presetBoxBreathing = ["Breath in", "Hold", "Breathe Out", "Hold"];
    let presetExcercise = ["Breath in", "Breathe Out", "Hold", "Hold", "Hold", "Hold"]; //tập cơ hoành 
    let numbericPreset = [3, 0.4, 3, 600];
    let durationReset = 0.2;

    let tl;

    // count > 7? alert("Your lung capacity is improved!"): alert("Keep it up!")

    function Breath(repeat, duration) {
        gsap.to(".breath-anim", {
            'background-color': lightColor,
            width: "50vw",
            ease: "power1.inOut",
            yoyo: true,
            repeat: repeat, // repeat: 4;sẽ lặp 5 lần (1 lần đầu và 4 lần lặp lại
            duration: duration,
            onRepeat: () => {
                txtIndicator.innerHTML !== "Breath out" ? txtIndicator.innerHTML = "Breath out" : txtIndicator.innerHTML = "Breath in";
            },
            onComplete: () => {
                txtIndicator.innerHTML = "Well done";
            }
        })
    }

    function Breath2(breathIn, Hold, breathOut, Hold2, repeat) {
        tl = gsap.timeline({ repeat: repeat });
        ease = "power2.inOut";
        tl.to(".breath-anim", {
            duration: 0,
            onComplete: () => {
                txtIndicator.innerHTML = "Breath in";
            }
        })
        .to(".breath-anim", {
            width: "50vw",
            ease: ease,
            // yoyo: true,
            duration: breathIn,
            onComplete: () => {
                txtIndicator.innerHTML = "Hold";
            }
        })
        .to(".breath-anim", {
            'background-color': strenghColor,
            ease: ease,
            // yoyo: true,
            duration: Hold,
            onComplete: () => {
                txtIndicator.innerHTML = "Breath Out"
            }
        })
        .to(".breath-anim", {
            width: "20vw",
            ease: ease,
            // yoyo: true,
            duration: breathOut,
            onComplete: () => {
                txtIndicator.innerHTML = "Hold"
            }
        })
        .to(".breath-anim", {
            'background-color': lightColor,
            ease: ease,
            yoyo: true,
            duration: Hold2,
            onComplete: () => {
                txtIndicator.innerHTML = "Well Done"
            }
        })
    }

    function Excercise(breathIn, Hold, breathOut, Hold2, repeat) {
        tl = gsap.timeline({ repeat: repeat });
        ease = "power2.inOut";
        tl.to(".breath-anim", {
            duration: 0,
            onComplete: () => {
                txtIndicator.innerHTML = "Breath in";
            }
        })
        .to(".breath-anim", {
            width: "50vw",
            ease: ease,
            // yoyo: true,
            duration: breathIn,
            onComplete: () => {
            }
        })
        .to(".breath-anim", {
            'background-color': strenghColor,
            ease: ease,
            // yoyo: true,
            duration: Hold,
            onComplete: () => {
                txtIndicator.innerHTML = "Breath Out"
            }
        })
        .to(".breath-anim", {
            width: "20vw",
            ease: ease,
            // yoyo: true,
            duration: breathOut,
            onComplete: () => {
                txtIndicator.innerHTML = "Hold"
            }
        })
        .to(".breath-anim", {
            'background-color': lightColor,
            ease: ease,
            yoyo: true,
            duration: Hold2,
            onComplete: () => {
                txtIndicator.innerHTML = "Well Done"
            }
        })
    }


    // Excercise(numbericPreset[0], numbericPreset[1], numbericPreset[2], numbericPreset[3], 3)
    

    function ResetState() {
        tl.kill();
        gsap.to(".breath-anim", {
            width: "50vw",
            'background-color': lightColor,
            ease: "Out",
            duration: durationReset,
            onComplete: () => {
                txtIndicator.innerHTML = "Reset test"
            }
        })
    }

    Breath2(numbericPreset[0], numbericPreset[1], numbericPreset[2], numbericPreset[3],3)


















    
</script>